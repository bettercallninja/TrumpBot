# Dictionary of localized text strings
localized_text = {
    # Help menu texts
    'help_intro': {
        'en': '📖 *TrumpBot Help Menu*\n\nThis bot allows you to launch missiles at other users in your group. Everyone now has *unlimited missiles*!\n\nChoose a category to learn more:',
        'fa': '📖 *منوی راهنمای ترامپ‌بات*\n\nاین ربات به شما امکان می‌دهد به کاربران دیگر در گروه خود موشک پرتاب کنید. همه اکنون *موشک نامحدود* دارند!\n\nیک دسته را برای اطلاعات بیشتر انتخاب کنید:'
    },
    'help_basic': {
        'en': '🔰 *Basic Commands*\n\n• `/start` - Start the bot\n• `/help` - Show this help menu\n• `/top` - Show leaderboard\n• `/inv` - Show your inventory\n• `/daily` - Claim daily bonus\n\nEveryone has *unlimited missiles*! Just reply to someone\'s message to attack them.',
        'fa': '🔰 *دستورات اساسی*\n\n• `/start` - شروع ربات\n• `/help` - نمایش این منوی راهنما\n• `/top` - نمایش جدول امتیازات\n• `/inv` - نمایش انبار شما\n• `/daily` - دریافت پاداش روزانه\n\nهمه *موشک نامحدود* دارند! فقط به پیام کسی پاسخ دهید تا به او حمله کنید.'
    },
    'help_attack': {
        'en': '⚔️ *Attack System*\n\n• Reply to someone\'s message to attack them\n• Each attack deals damage to their medals\n• You can also use special items to boost your attack\n• When someone loses all their medals, you get bonus medals\n\nYou now have *unlimited missiles* - no need to wait!',
        'fa': '⚔️ *سیستم حمله*\n\n• به پیام کسی پاسخ دهید تا به او حمله کنید\n• هر حمله به مدال‌های آنها آسیب می‌زند\n• همچنین می‌توانید از آیتم‌های ویژه برای تقویت حمله خود استفاده کنید\n• وقتی کسی تمام مدال‌های خود را از دست می‌دهد، شما مدال‌های اضافی دریافت می‌کنید\n\nشما اکنون *موشک نامحدود* دارید - نیازی به انتظار نیست!'
    },
    'help_defense': {
        'en': '🛡️ *Defense System*\n\n• Buy shields to block attacks\n• Interceptors reduce incoming damage\n• Aegis Shield (special item) gives higher block chance\n• Each defense item is consumed when it blocks an attack',
        'fa': '🛡️ *سیستم دفاعی*\n\n• سپر بخرید تا حملات را دفع کنید\n• رهگیرها آسیب ورودی را کاهش می‌دهند\n• سپر آگیس (آیتم ویژه) شانس دفع بالاتری می‌دهد\n• هر آیتم دفاعی هنگام دفع یک حمله مصرف می‌شود'
    },
    'help_items': {
        'en': '🎒 *Inventory & Items*\n\n• Check your inventory with `/inv`\n• Buy items with medals in the shop\n• Special items:\n  - MOAB: Deals double damage\n  - Patriot: Increases attack accuracy\n  - Aegis Shield: Improved defense\n\nItems are used automatically when attacking or being attacked.',
        'fa': '🎒 *انبار و آیتم‌ها*\n\n• با دستور `/inv` انبار خود را بررسی کنید\n• با مدال در فروشگاه آیتم بخرید\n• آیتم‌های ویژه:\n  - MOAB: آسیب دو برابر\n  - پاتریوت: افزایش دقت حمله\n  - سپر آگیس: دفاع بهبود یافته\n\nآیتم‌ها هنگام حمله یا دفاع به طور خودکار استفاده می‌شوند.'
    },
    'help_stars': {
        'en': '⭐ *Stars System*\n\n• Currently, you can add stars for FREE with the `/stars` command\n• Stars can be used to purchase special items\n• In the future, stars will require Telegram Stars transfer\n• Special items give you tactical advantages in battle',
        'fa': '⭐ *سیستم ستاره‌ها*\n\n• در حال حاضر، می‌توانید با دستور `/stars` ستاره‌ها را رایگان اضافه کنید\n• از ستاره‌ها می‌توان برای خرید آیتم‌های ویژه استفاده کرد\n• در آینده، ستاره‌ها نیاز به انتقال ستاره‌های تلگرام خواهند داشت\n• آیتم‌های ویژه به شما مزایای تاکتیکی در نبرد می‌دهند'
    },
    
    # Button texts
    'help_basic_btn': {
        'en': '🔰 Basic Commands',
        'fa': '🔰 دستورات اساسی'
    },
    'help_attack_btn': {
        'en': '⚔️ Attack System',
        'fa': '⚔️ سیستم حمله'
    },
    'help_defense_btn': {
        'en': '🛡️ Defense System',
        'fa': '🛡️ سیستم دفاعی'
    },
    'help_items_btn': {
        'en': '🎒 Items',
        'fa': '🎒 آیتم‌ها'
    },
    'help_stars_btn': {
        'en': '⭐ Stars',
        'fa': '⭐ ستاره‌ها'
    },
    'back_btn': {
        'en': '◀️ Back',
        'fa': '◀️ بازگشت'
    },
    
    # Stars related messages
    'stars_added_free': {
        'en': '✅ You received {0} free stars!\nYou now have {1} stars in total.',
        'fa': '✅ شما {0} ستاره رایگان دریافت کردید!\nاکنون در مجموع {1} ستاره دارید.'
    },
    'stars_purchase_info': {
        'en': 'To get stars, you need to transfer Telegram Stars. Choose an option below:',
        'fa': 'برای دریافت ستاره، باید ستاره‌های تلگرام را منتقل کنید. یک گزینه را از زیر انتخاب کنید:'
    },
    
    # Attack related messages
    'no_missiles': {
        'en': 'You don\'t have any missiles left! Wait for restocking or buy more.',
        'fa': 'موشکی برای شما باقی نمانده است! منتظر تجدید ذخیره باشید یا بیشتر بخرید.'
    },
    'target_not_found': {
        'en': 'Target user not found! They need to start the bot first.',
        'fa': 'کاربر هدف پیدا نشد! آنها باید ابتدا ربات را راه‌اندازی کنند.'
    },
    
    # Bot welcome and startup messages
    'welcome_new_user': {
        'en': '🎉 *Welcome to TrumpBot!*\n\nYou\'ve been added to the battle arena! Get ready to fight other players with unlimited missiles!\n\n🏅 Starting medals: 100\n🚀 Unlimited missiles available\n💎 Free daily bonuses\n\nUse /help to learn more about the game!',
        'fa': '🎉 *به ترامپ‌بات خوش آمدید!*\n\nشما به عرصه نبرد اضافه شدید! آماده باشید تا با موشک‌های نامحدود با بازیکنان دیگر بجنگید!\n\n🏅 مدال‌های شروع: ۱۰۰\n🚀 موشک‌های نامحدود در دسترس\n💎 پاداش‌های روزانه رایگان\n\nبرای یادگیری بیشتر درباره بازی از /help استفاده کنید!'
    },
    'welcome_back': {
        'en': '👋 *Welcome back, {0}!*\n\nReady for more battles?\n\n📊 Your current stats:\n🏅 Medals: {1}\n🎯 Level: {2}\n⚔️ Battles won: {3}',
        'fa': '👋 *برگشتت مبارک، {0}!*\n\nآماده نبردهای بیشتر؟\n\n📊 آمار فعلی شما:\n🏅 مدال‌ها: {1}\n🎯 سطح: {2}\n⚔️ نبردهای برده: {3}'
    },
    'bot_started': {
        'en': '🤖 *TrumpBot is now active!*\n\nMissile warfare is enabled in this group.\nEveryone has unlimited missiles!\n\nReply to someone\'s message to attack them!\nUse /help for more information.',
        'fa': '🤖 *ترامپ‌بات اکنون فعال است!*\n\nجنگ موشکی در این گروه فعال شده.\nهمه موشک نامحدود دارند!\n\nبه پیام کسی پاسخ دهید تا به او حمله کنید!\nبرای اطلاعات بیشتر از /help استفاده کنید.'
    },
    
    # Attack success messages
    'attack_success': {
        'en': '💥 *Direct hit!*\n\n⚔️ {0} attacked {1}!\n💔 Damage dealt: {2} medals\n🏆 {0} gained {3} medals\n\n{4}',
        'fa': '💥 *اصابت مستقیم!*\n\n⚔️ {0} به {1} حمله کرد!\n💔 آسیب وارده: {2} مدال\n🏆 {0} مقدار {3} مدال کسب کرد\n\n{4}'
    },
    'attack_critical': {
        'en': '🔥 *CRITICAL HIT!* 🔥\n\n💥 {0} delivered a devastating blow to {1}!\n⚡ Critical damage: {2} medals\n🎯 Perfect shot bonus: +{3} medals\n\n{4}',
        'fa': '🔥 *ضربه بحرانی!* 🔥\n\n💥 {0} ضربه ویرانگری به {1} زد!\n⚡ آسیب بحرانی: {2} مدال\n🎯 پاداش شوت کامل: +{3} مدال\n\n{4}'
    },
    'attack_blocked': {
        'en': '🛡️ *Attack blocked!*\n\n{0} tried to attack {1}, but their defenses held strong!\n🔄 Damage reduced: {2}% → {3} medals\n🛡️ Defense effectiveness: {4}\n\n{5}',
        'fa': '🛡️ *حمله مسدود شد!*\n\n{0} سعی کرد به {1} حمله کند، اما دفاع‌هایش محکم ایستاد!\n🔄 آسیب کاهش یافته: {2}% → {3} مدال\n🛡️ اثربخشی دفاع: {4}\n\n{5}'
    },
    'attack_failed': {
        'en': '❌ *Attack missed!*\n\n{0}\'s attack on {1} failed to connect!\n💫 No damage dealt\n🎯 Better luck next time!',
        'fa': '❌ *حمله خطا رفت!*\n\n حمله {0} به {1} موفق نشد!\n💫 آسیبی وارد نشد\n🎯 بار بعد بهتر!'
    },
    
    # Defense messages
    'shield_activated': {
        'en': '🛡️ *Shield activated!*\n\nProtection duration: {0}\nShield strength: {1}%\nType: {2}',
        'fa': '🛡️ *سپر فعال شد!*\n\nمدت حفاظت: {0}\nقدرت سپر: {1}%\nنوع: {2}'
    },
    'shield_expired': {
        'en': '⚠️ Your shield has expired! You\'re now vulnerable to attacks.',
        'fa': '⚠️ سپر شما منقضی شده! اکنون در برابر حملات آسیب‌پذیر هستید.'
    },
    'intercept_activated': {
        'en': '🚀 *Intercept system online!*\n\nDuration: {0}\nDamage reduction: {1}%\nAccuracy: {2}%',
        'fa': '🚀 *سیستم رهگیری آنلاین!*\n\nمدت: {0}\nکاهش آسیب: {1}%\nدقت: {2}%'
    },
    
    # Shop messages
    'shop_welcome': {
        'en': '🛒 *TrumpBot Shop*\n\nWelcome to the arsenal! Here you can buy weapons, shields, and special items.\n\n💰 Your medals: {0}\n⭐ Your stars: {1}\n\nChoose a category:',
        'fa': '🛒 *فروشگاه ترامپ‌بات*\n\nبه زرادخانه خوش آمدید! اینجا می‌توانید سلاح، سپر و آیتم‌های ویژه بخرید.\n\n💰 مدال‌های شما: {0}\n⭐ ستاره‌های شما: {1}\n\nیک دسته انتخاب کنید:'
    },
    'shop_weapons': {
        'en': '⚔️ *Weapons Shop*\n\nUpgrade your arsenal with powerful weapons!\nAll purchases are permanent upgrades.',
        'fa': '⚔️ *فروشگاه سلاح*\n\nزرادخانه خود را با سلاح‌های قدرتمند ارتقا دهید!\nتمام خریدها ارتقاهای دائمی هستند.'
    },
    'shop_defense': {
        'en': '🛡️ *Defense Shop*\n\nProtect yourself with shields and interceptors!\nDefense items are consumed when used.',
        'fa': '🛡️ *فروشگاه دفاعی*\n\nخود را با سپر و رهگیرها محافظت کنید!\nآیتم‌های دفاعی هنگام استفاده مصرف می‌شوند.'
    },
    'shop_special': {
        'en': '⭐ *Special Items*\n\nPremium items that give you tactical advantages!\nRequires stars to purchase.',
        'fa': '⭐ *آیتم‌های ویژه*\n\nآیتم‌های ممتاز که مزایای تاکتیکی به شما می‌دهند!\nبرای خرید نیاز به ستاره دارد.'
    },
    'purchase_success': {
        'en': '✅ *Purchase successful!*\n\nYou bought: {0}\nCost: {1} {2}\nRemaining {3}: {4}',
        'fa': '✅ *خرید موفق!*\n\nشما خریدید: {0}\nهزینه: {1} {2}\n{3} باقی‌مانده: {4}'
    },
    'purchase_failed': {
        'en': '❌ *Purchase failed!*\n\nYou don\'t have enough {0}.\nRequired: {1} | You have: {2}',
        'fa': '❌ *خرید ناموفق!*\n\nشما {0} کافی ندارید.\nمورد نیاز: {1} | شما دارید: {2}'
    },
    
    # Inventory messages
    'inventory_title': {
        'en': '🎒 *Your Inventory*\n\n💰 Medals: {0}\n⭐ Stars: {1}\n🎯 Level: {2}\n\n📦 Items:',
        'fa': '🎒 *انبار شما*\n\n💰 مدال‌ها: {0}\n⭐ ستاره‌ها: {1}\n🎯 سطح: {2}\n\n📦 آیتم‌ها:'
    },
    'inventory_empty': {
        'en': 'Your inventory is empty. Visit the shop to buy items!',
        'fa': 'انبار شما خالی است. برای خرید آیتم به فروشگاه بروید!'
    },
    'inventory_item': {
        'en': '• {0}: {1}x',
        'fa': '• {0}: {1}عدد'
    },
    
    # Statistics messages
    'stats_personal': {
        'en': '📊 *Personal Statistics*\n\n👤 Player: {0}\n🏅 Medals: {1}\n🎯 Level: {2} ({3})\n⚡ Experience: {4}/{5}\n\n⚔️ Combat Stats:\n• Attacks made: {6}\n• Attacks received: {7}\n• Victories: {8}\n• Defeats: {9}\n• Win rate: {10}%\n\n🛡️ Defense Stats:\n• Shields used: {11}\n• Items bought: {12}\n• Activity points: {13}',
        'fa': '📊 *آمار شخصی*\n\n👤 بازیکن: {0}\n🏅 مدال‌ها: {1}\n🎯 سطح: {2} ({3})\n⚡ تجربه: {4}/{5}\n\n⚔️ آمار نبرد:\n• حملات انجام شده: {6}\n• حملات دریافتی: {7}\n• پیروزی‌ها: {8}\n• شکست‌ها: {9}\n• نرخ برد: {10}%\n\n🛡️ آمار دفاعی:\n• سپرهای استفاده شده: {11}\n• آیتم‌های خریداری شده: {12}\n• امتیاز فعالیت: {13}'
    },
    'leaderboard_title': {
        'en': '🏆 *Group Leaderboard*\n\nTop players in this group:\n',
        'fa': '🏆 *جدول امتیازات گروه*\n\nبرترین بازیکنان این گروه:\n'
    },
    'leaderboard_entry': {
        'en': '{0}. {1} - {2} medals (Level {3})',
        'fa': '{0}. {1} - {2} مدال (سطح {3})'
    },
    'leaderboard_empty': {
        'en': 'No players found. Start playing to appear on the leaderboard!',
        'fa': 'هیچ بازیکنی یافت نشد. شروع به بازی کنید تا در جدول امتیازات ظاهر شوید!'
    },
    
    # Level and progression messages
    'level_up': {
        'en': '🎉 *LEVEL UP!* 🎉\n\nCongratulations {0}!\nYou reached level {1}!\n\n🎁 Level bonus: +{2} medals\n🏆 New rank: {3}\n⭐ Skill points gained: +{4}',
        'fa': '🎉 *ارتقای سطح!* 🎉\n\nتبریک {0}!\nشما به سطح {1} رسیدید!\n\n🎁 پاداش سطح: +{2} مدال\n🏆 رتبه جدید: {3}\n⭐ امتیاز مهارت کسب شده: +{4}'
    },
    'prestige_achieved': {
        'en': '👑 *PRESTIGE UNLOCKED!* 👑\n\n{0} has achieved prestige level {1}!\nThis is a legendary accomplishment!\n\n✨ Special bonuses unlocked\n🌟 Elite status granted',
        'fa': '👑 *اعتبار باز شد!* 👑\n\n{0} به سطح اعتبار {1} رسید!\nاین یک دستاورد افسانه‌ای است!\n\n✨ پاداش‌های ویژه باز شد\n🌟 وضعیت نخبه اعطا شد'
    },
    
    # Achievement messages
    'achievement_unlocked': {
        'en': '🏆 *ACHIEVEMENT UNLOCKED!* 🏆\n\n{0} {1}\n{2}\n\n🎁 Reward: +{3} medals',
        'fa': '🏆 *دستاورد باز شد!* 🏆\n\n{0} {1}\n{2}\n\n🎁 پاداش: +{3} مدال'
    },
    'achievements_list': {
        'en': '🏆 *Your Achievements*\n\nUnlocked achievements:',
        'fa': '🏆 *دستاوردهای شما*\n\nدستاوردهای باز شده:'
    },
    'no_achievements': {
        'en': 'No achievements unlocked yet. Keep playing to earn them!',
        'fa': 'هنوز هیچ دستاوردی باز نشده. برای کسب آنها به بازی ادامه دهید!'
    },
    
    # Daily bonus messages
    'daily_bonus_claimed': {
        'en': '🎁 *Daily bonus claimed!*\n\nYou received:\n💰 +{0} medals\n⭐ +{1} stars\n\nStreak: {2} days\nNext bonus in: {3}',
        'fa': '🎁 *پاداش روزانه دریافت شد!*\n\nشما دریافت کردید:\n💰 +{0} مدال\n⭐ +{1} ستاره\n\nرشته: {2} روز\nپاداش بعدی تا: {3}'
    },
    'daily_bonus_already_claimed': {
        'en': '⏰ You\'ve already claimed your daily bonus!\n\nNext bonus available in: {0}',
        'fa': '⏰ شما قبلاً پاداش روزانه خود را دریافت کرده‌اید!\n\nپاداش بعدی تا: {0} در دسترس است'
    },
    'daily_bonus_streak': {
        'en': '🔥 *{0}-day streak bonus!* 🔥\n\nExtra reward: +{1} medals',
        'fa': '🔥 *پاداش رشته {0} روزه!* 🔥\n\nپاداش اضافی: +{1} مدال'
    },
    
    # Error messages
    'error_general': {
        'en': '❌ An error occurred. Please try again later.',
        'fa': '❌ خطایی رخ داد. لطفاً بعداً دوباره تلاش کنید.'
    },
    'error_user_not_registered': {
        'en': '⚠️ You need to start the bot first! Use /start command.',
        'fa': '⚠️ ابتدا باید ربات را شروع کنید! از دستور /start استفاده کنید.'
    },
    'error_invalid_command': {
        'en': '❓ Invalid command. Use /help to see available commands.',
        'fa': '❓ دستور نامعتبر. برای دیدن دستورات موجود از /help استفاده کنید.'
    },
    'error_insufficient_funds': {
        'en': '💸 You don\'t have enough medals for this action.',
        'fa': '💸 برای این عمل مدال کافی ندارید.'
    },
    'error_cooldown_active': {
        'en': '⏱️ You must wait {0} before using this command again.',
        'fa': '⏱️ باید {0} صبر کنید تا دوباره از این دستور استفاده کنید.'
    },
    
    # Time-related messages
    'time_expired': {
        'en': 'Expired',
        'fa': 'منقضی شده'
    },
    'time_seconds': {
        'en': '{0} seconds',
        'fa': '{0} ثانیه'
    },
    'time_minutes': {
        'en': '{0} minutes',
        'fa': '{0} دقیقه'
    },
    'time_hours': {
        'en': '{0} hours',
        'fa': '{0} ساعت'
    },
    'time_days': {
        'en': '{0} days',
        'fa': '{0} روز'
    },
    
    # Weapon and item names
    'weapon_pistol': {
        'en': 'Pistol',
        'fa': 'تپانچه'
    },
    'weapon_rifle': {
        'en': 'Rifle',
        'fa': 'تفنگ'
    },
    'weapon_sniper': {
        'en': 'Sniper Rifle',
        'fa': 'تفنگ تک‌تیرانداز'
    },
    'weapon_shotgun': {
        'en': 'Shotgun',
        'fa': 'ساچمه‌ای'
    },
    'weapon_machine_gun': {
        'en': 'Machine Gun',
        'fa': 'مسلسل'
    },
    'weapon_rocket': {
        'en': 'Rocket Launcher',
        'fa': 'راکت انداز'
    },
    'weapon_missile': {
        'en': 'Missile',
        'fa': 'موشک'
    },
    'weapon_nuke': {
        'en': 'Nuclear Weapon',
        'fa': 'سلاح هسته‌ای'
    },
    
    'item_shield': {
        'en': 'Shield',
        'fa': 'سپر'
    },
    'item_interceptor': {
        'en': 'Interceptor',
        'fa': 'رهگیر'
    },
    'item_aegis_shield': {
        'en': 'Aegis Shield',
        'fa': 'سپر آگیس'
    },
    'item_moab': {
        'en': 'MOAB (Mother of All Bombs)',
        'fa': 'MOAB (مادر همه بمب‌ها)'
    },
    'item_patriot': {
        'en': 'Patriot Missile',
        'fa': 'موشک پاتریوت'
    },
    
    # Rank titles
    'rank_rookie': {
        'en': 'Rookie',
        'fa': 'تازه‌کار'
    },
    'rank_private': {
        'en': 'Private',
        'fa': 'سرباز'
    },
    'rank_corporal': {
        'en': 'Corporal',
        'fa': 'سرجوخه'
    },
    'rank_sergeant': {
        'en': 'Sergeant',
        'fa': 'گروهبان'
    },
    'rank_lieutenant': {
        'en': 'Lieutenant',
        'fa': 'ستوان'
    },
    'rank_captain': {
        'en': 'Captain',
        'fa': 'سروان'
    },
    'rank_major': {
        'en': 'Major',
        'fa': 'سرگرد'
    },
    'rank_colonel': {
        'en': 'Colonel',
        'fa': 'سرهنگ'
    },
    'rank_general': {
        'en': 'General',
        'fa': 'سرلشکر'
    },
    'rank_marshal': {
        'en': 'Marshal',
        'fa': 'فرمانده'
    },
    'rank_elite': {
        'en': 'Elite {0}',
        'fa': '{0} نخبه'
    },
    
    # Game status messages
    'game_status_active': {
        'en': '🟢 Game Status: Active',
        'fa': '🟢 وضعیت بازی: فعال'
    },
    'game_status_maintenance': {
        'en': '🟡 Game Status: Maintenance',
        'fa': '🟡 وضعیت بازی: تعمیر و نگهداری'
    },
    'game_status_disabled': {
        'en': '🔴 Game Status: Disabled',
        'fa': '🔴 وضعیت بازی: غیرفعال'
    },
    
    # Special events
    'event_double_xp': {
        'en': '⚡ *DOUBLE XP EVENT!* ⚡\n\nEarn 2x experience for all activities!\nEvent ends in: {0}',
        'fa': '⚡ *رویداد تجربه دوبرابر!* ⚡\n\nبرای تمام فعالیت‌ها ۲ برابر تجربه کسب کنید!\nپایان رویداد تا: {0}'
    },
    'event_bonus_medals': {
        'en': '💰 *BONUS MEDALS EVENT!* 💰\n\nGet extra medals from all sources!\nBonus: +{0}%\nEvent ends in: {1}',
        'fa': '💰 *رویداد مدال‌های اضافی!* 💰\n\nاز تمام منابع مدال اضافی دریافت کنید!\nپاداش: +{0}%\nپایان رویداد تا: {1}'
    },
    
    # Language settings
    'language_changed': {
        'en': '✅ Language changed to English!',
        'fa': '✅ زبان به فارسی تغییر یافت!'
    },
    'language_select': {
        'en': '🌐 *Select Language*\n\nChoose your preferred language:',
        'fa': '🌐 *انتخاب زبان*\n\nزبان مورد نظر خود را انتخاب کنید:'
    },
    'language_english': {
        'en': '🇺🇸 English',
        'fa': '🇺🇸 انگلیسی'
    },
    'language_persian': {
        'en': '🇮🇷 Persian (فارسی)',
        'fa': '🇮🇷 فارسی (Persian)'
    },
    
    # Group management
    'group_settings': {
        'en': '⚙️ *Group Settings*\n\nConfigure TrumpBot for this group:',
        'fa': '⚙️ *تنظیمات گروه*\n\nترامپ‌بات را برای این گروه پیکربندی کنید:'
    },
    'group_game_enabled': {
        'en': '✅ Game enabled for this group!',
        'fa': '✅ بازی برای این گروه فعال شد!'
    },
    'group_game_disabled': {
        'en': '❌ Game disabled for this group.',
        'fa': '❌ بازی برای این گروه غیرفعال شد.'
    },
    'only_admins': {
        'en': '🔒 Only group administrators can use this command.',
        'fa': '🔒 فقط مدیران گروه می‌توانند از این دستور استفاده کنند.'
    },
    
    # Currency and formatting
    'medals': {
        'en': 'medals',
        'fa': 'مدال'
    },
    'stars': {
        'en': 'stars',
        'fa': 'ستاره'
    },
    'level': {
        'en': 'Level',
        'fa': 'سطح'
    },
    'experience': {
        'en': 'Experience',
        'fa': 'تجربه'
    },
    
    # Button navigation
    'btn_shop': {
        'en': '🛒 Shop',
        'fa': '🛒 فروشگاه'
    },
    'btn_inventory': {
        'en': '🎒 Inventory',
        'fa': '🎒 انبار'
    },
    'btn_stats': {
        'en': '📊 Stats',
        'fa': '📊 آمار'
    },
    'btn_leaderboard': {
        'en': '🏆 Leaderboard',
        'fa': '🏆 جدول امتیازات'
    },
    'btn_help': {
        'en': '❓ Help',
        'fa': '❓ راهنما'
    },
    'btn_settings': {
        'en': '⚙️ Settings',
        'fa': '⚙️ تنظیمات'
    },
    'btn_close': {
        'en': '❌ Close',
        'fa': '❌ بستن'
    },
    'btn_confirm': {
        'en': '✅ Confirm',
        'fa': '✅ تأیید'
    },
    'btn_cancel': {
        'en': '❌ Cancel',
        'fa': '❌ لغو'
    },
    'btn_next': {
        'en': '➡️ Next',
        'fa': '➡️ بعدی'
    },
    'btn_previous': {
        'en': '⬅️ Previous',
        'fa': '⬅️ قبلی'
    },
    
    # Tutorial messages
    'tutorial_welcome': {
        'en': '🎓 *Welcome to TrumpBot Tutorial!*\n\nLet\'s learn how to play step by step.',
        'fa': '🎓 *به آموزش ترامپ‌بات خوش آمدید!*\n\nبیایید قدم به قدم یاد بگیریم چطور بازی کنیم.'
    },
    'tutorial_step_1': {
        'en': '📝 *Step 1: Basic Attack*\n\nTo attack someone, simply reply to their message!\nTry it now by replying to any message in the group.',
        'fa': '📝 *مرحله ۱: حمله اساسی*\n\nبرای حمله به کسی، فقط به پیام او پاسخ دهید!\nاکنون با پاسخ دادن به هر پیامی در گروه امتحان کنید.'
    },
    'tutorial_step_2': {
        'en': '🛒 *Step 2: Shopping*\n\nVisit the shop to buy weapons and shields!\nUse /shop command or the button below.',
        'fa': '🛒 *مرحله ۲: خرید*\n\nبرای خرید سلاح و سپر به فروشگاه بروید!\nاز دستور /shop یا دکمه زیر استفاده کنید.'
    },
    'tutorial_step_3': {
        'en': '🛡️ *Step 3: Defense*\n\nBuy shields to protect yourself from attacks!\nShields automatically block incoming damage.',
        'fa': '🛒 *مرحله ۳: دفاع*\n\nبرای محافظت از خود در برابر حملات سپر بخرید!\nسپرها به طور خودکار آسیب ورودی را مسدود می‌کنند.'
    },
    'tutorial_complete': {
        'en': '🎉 *Tutorial Complete!*\n\nYou\'re now ready to dominate the battlefield!\nGood luck, commander!',
        'fa': '🎉 *آموزش کامل شد!*\n\nاکنون آماده تسلط بر میدان نبر هستید!\nموفق باشید، فرمانده!'
    }
}

def get_localized_text(key, language='en'):
    """Get localized text for a specific key and language"""
    if key not in localized_text:
        return f"[Missing text: {key}]"
    
    if language not in localized_text[key]:
        # Fallback to English if requested language not available
        language = 'en'
    
    return localized_text[key][language]

def format_localized_text(key, language='en', *args, **kwargs):
    """Get localized text and format it with provided arguments"""
    text = get_localized_text(key, language)
    try:
        if args:
            return text.format(*args)
        elif kwargs:
            return text.format(**kwargs)
        else:
            return text
    except (KeyError, IndexError, ValueError) as e:
        # If formatting fails, return the unformatted text
        return text

def get_supported_languages():
    """Get list of supported language codes"""
    return ['en', 'fa']

def detect_user_language(user_language_code=None, message_text=None):
    """Detect user language based on various factors"""
    # Check explicit language code
    if user_language_code and user_language_code.startswith('fa'):
        return 'fa'
    
    # Check message text for Persian characters
    if message_text:
        import re
        persian_chars = len(re.findall(r'[\u0600-\u06FF]', message_text))
        if persian_chars > len(message_text) * 0.3:  # 30% Persian characters
            return 'fa'
    
    # Default to English
    return 'en'

def get_number_localized(number, language='en'):
    """Format number according to language locale"""
    if language == 'fa':
        # Persian digit conversion
        persian_digits = "۰۱۲۳۴۵۶۷۸۹"
        english_digits = "0123456789"
        
        formatted = f"{number:,}"
        
        # Convert to Persian digits
        for eng, per in zip(english_digits, persian_digits):
            formatted = formatted.replace(eng, per)
        
        return formatted
    else:
        return f"{number:,}"

def get_currency_symbol(currency_type, language='en'):
    """Get currency symbol based on type and language"""
    symbols = {
        'medals': {'en': '🏅', 'fa': '🏅'},
        'stars': {'en': '⭐', 'fa': '⭐'},
        'experience': {'en': '⚡', 'fa': '⚡'},
        'level': {'en': '🎯', 'fa': '🎯'}
    }
    
    return symbols.get(currency_type, {}).get(language, '💰')

def get_direction_text(language='en'):
    """Get text direction for UI layout"""
    if language == 'fa':
        return 'rtl'  # Right to left
    else:
        return 'ltr'  # Left to right

def get_time_format_pattern(language='en'):
    """Get time format pattern for the language"""
    if language == 'fa':
        return '%Y/%m/%d %H:%M'  # Persian date format
    else:
        return '%B %d, %Y %H:%M'  # English date format

def validate_language_code(language_code):
    """Validate if language code is supported"""
    return language_code in get_supported_languages()

def get_language_name(language_code, in_language='en'):
    """Get the name of a language in another language"""
    language_names = {
        'en': {
            'en': 'English',
            'fa': 'English'
        },
        'fa': {
            'en': 'Persian',
            'fa': 'فارسی'
        }
    }
    
    return language_names.get(language_code, {}).get(in_language, language_code)

def get_weapon_emoji(weapon_type):
    """Get emoji for weapon type"""
    weapon_emojis = {
        'pistol': '🔫',
        'rifle': '🔫', 
        'sniper': '🎯',
        'shotgun': '💥',
        'machine_gun': '⚡',
        'rocket': '🚀',
        'missile': '🚀',
        'nuke': '☢️',
        'grenade': '💣',
        'bomb': '💣',
        'knife': '🗡️',
        'sword': '⚔️'
    }
    
    return weapon_emojis.get(weapon_type, '🔫')

def get_rank_emoji(rank_level):
    """Get emoji for rank level"""
    rank_emojis = {
        1: '🥉',  # Bronze
        2: '🥈',  # Silver  
        3: '🥇',  # Gold
        4: '🏆',  # Trophy
        5: '👑',  # Crown
        6: '💎',  # Diamond
        7: '⭐',  # Star
        8: '🌟',  # Glowing star
        9: '✨',  # Sparkles
        10: '🔥'  # Fire
    }
    
    return rank_emojis.get(rank_level, '🏅')

def create_progress_bar(current, maximum, length=10, language='en'):
    """Create a visual progress bar"""
    if maximum <= 0:
        return "█" * length
    
    progress = min(current / maximum, 1.0)
    filled_length = round(length * progress)
    
    if language == 'fa':
        filled_char = "█"
        empty_char = "░"
    else:
        filled_char = "█"
        empty_char = "▓"
    
    bar = filled_char * filled_length + empty_char * (length - filled_length)
    percentage = round(progress * 100, 1)
    
    percentage_text = get_number_localized(percentage, language)
    return f"{bar} {percentage_text}%"

def get_battle_result_emoji(result_type):
    """Get emoji for battle result"""
    result_emojis = {
        'critical': '🔥',
        'success': '💥',
        'blocked': '🛡️',
        'failed': '❌',
        'miss': '💫'
    }
    
    return result_emojis.get(result_type, '⚔️')

def format_duration_localized(seconds, language='en'):
    """Format duration in localized format"""
    if seconds <= 0:
        return get_localized_text('time_expired', language)
    
    days = seconds // 86400
    hours = (seconds % 86400) // 3600
    minutes = (seconds % 3600) // 60
    secs = seconds % 60
    
    parts = []
    
    if language == 'fa':
        if days > 0:
            parts.append(f"{get_number_localized(days, language)} روز")
        if hours > 0:
            parts.append(f"{get_number_localized(hours, language)} ساعت")
        if minutes > 0:
            parts.append(f"{get_number_localized(minutes, language)} دقیقه")
        if secs > 0 and not parts:  # Only show seconds if no larger units
            parts.append(f"{get_number_localized(secs, language)} ثانیه")
        return " و ".join(parts) if parts else "منقضی شده"
    else:
        if days > 0:
            parts.append(f"{days}d")
        if hours > 0:
            parts.append(f"{hours}h")
        if minutes > 0:
            parts.append(f"{minutes}m")
        if secs > 0 and not parts:
            parts.append(f"{secs}s")
        return " ".join(parts) if parts else "expired"

# Convenience function for easier access
def t(key, language='en', *args, **kwargs):
    """Shorthand function for getting localized text"""
    return format_localized_text(key, language, *args, **kwargs)

# Initialize default language detection
DEFAULT_LANGUAGE = 'en'

def set_default_language(language_code):
    """Set the default language for the application"""
    global DEFAULT_LANGUAGE
    if validate_language_code(language_code):
        DEFAULT_LANGUAGE = language_code
        return True
    return False

def get_default_language():
    """Get the current default language"""
    return DEFAULT_LANGUAGE